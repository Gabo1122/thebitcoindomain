(function(a,b){if('function'==typeof define&&define.amd)define(['module'],b);else if('undefined'!=typeof exports)b(module);else{var c={exports:{}};b(c),a.parseJsonBignumber=c.exports}})(this,function(a){'use strict';a.exports=function(a){function b(a){return u.lastIndex=0,u.test(a)?'"'+a.replace(u,function(b){var a=v[b];return'string'==typeof a?a:'\\u'+('0000'+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function c(d,e){var f,g,h,i,j,k=r,l=e[d],m=a&&a.isInstance&&a.isInstance(l);switch(m&&!l.isFinite()&&(l=null),m?l=a.stringify(l):l&&'object'==typeof l&&'function'==typeof l.toJSON&&(l=l.toJSON(d)),'function'==typeof t&&(l=t.call(e,d,l)),typeof l){case'string':return m?l:b(l);case'number':return isFinite(l)?l+'':'null';case'boolean':return l+'';case'object':if(!l)return'null';if(r+=s,j=[],'[object Array]'===Object.prototype.toString.apply(l)){for(i=l.length,f=0;f<i;f+=1)j[f]=c(f,l)||'null';return h=0===j.length?'[]':r?'[\n'+r+j.join(',\n'+r)+'\n'+k+']':'['+j.join(',')+']',r=k,h}if(t&&'object'==typeof t)for(i=t.length,f=0;f<i;f+=1)'string'==typeof t[f]&&(g=t[f],h=c(g,l),h&&j.push(b(g)+(r?': ':':')+h));else for(g in l)Object.prototype.hasOwnProperty.call(l,g)&&(h=c(g,l),h&&j.push(b(g)+(r?': ':':')+h));return h=0===j.length?'{}':r?'{\n'+r+j.join(',\n'+r)+'\n'+k+'}':'{'+j.join(',')+'}',r=k,h;}}var d={strict:!1};a!==void 0&&null!==a&&!0===a.strict&&(d.strict=!0);var e,f,g,h,j={'"':'"',"\\":'\\',"/":'/',b:'\b',f:'\f',n:'\n',r:'\r',t:'\t'},k=function(a){throw{name:'SyntaxError',message:a,at:e,text:g}},l=function(a){return a&&a!==f&&k('Expected \''+a+'\' instead of \''+f+'\''),f=g.charAt(e),e+=1,f},i=function(){var b,c='';for('-'===f&&(c='-',l('-'));'0'<=f&&'9'>=f;)c+=f,l();if('.'===f)for(c+='.';l()&&'0'<=f&&'9'>=f;)c+=f;if('e'===f||'E'===f)for(c+=f,l(),('-'===f||'+'===f)&&(c+=f,l());'0'<=f&&'9'>=f;)c+=f,l();return b=+c,a&&a.parse?a.parse(c):isFinite(b)?15<c.length?c:b:void k('Bad number')},m=function(){var a,b,c,d='';if('"'===f)for(;l();){if('"'===f)return l(),d;if('\\'!==f)d+=f;else if(l(),'u'===f){for(c=0,b=0;4>b&&(a=parseInt(l(),16),!!isFinite(a));b+=1)c=16*c+a;d+=String.fromCharCode(c)}else if('string'==typeof j[f])d+=j[f];else break}k('Bad string')},n=function(){for(;f&&' '>=f;)l()},o=function(){switch(f){case't':return l('t'),l('r'),l('u'),l('e'),!0;case'f':return l('f'),l('a'),l('l'),l('s'),l('e'),!1;case'n':return l('n'),l('u'),l('l'),l('l'),null;}k('Unexpected \''+f+'\'')},p=function(){var a=[];if('['===f){if(l('['),n(),']'===f)return l(']'),a;for(;f;){if(a.push(h()),n(),']'===f)return l(']'),a;l(','),n()}}k('Bad array')},q=function(){var a,b={};if('{'===f){if(l('{'),n(),'}'===f)return l('}'),b;for(;f;){if(a=m(),n(),l(':'),!0===d.strict&&Object.hasOwnProperty.call(b,a)&&k('Duplicate key "'+a+'"'),b[a]=h(),n(),'}'===f)return l('}'),b;l(','),n()}}k('Bad object')};h=function(){return n(),'{'===f?q():'['===f?p():'"'===f?m():'-'===f?i():'0'<=f&&'9'>=f?i():o()};var r,s,t,u=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,v={"":'\\b',"	":'\\t',"\n":'\\n',"":'\\f',"\r":'\\r','"':'\\"',"\\":'\\\\'},w=function(a,b,d){var e;if(r='',s='','number'==typeof d)for(e=0;e<d;e+=1)s+=' ';else'string'==typeof d&&(s=d);if(t=b,b&&'function'!=typeof b&&('object'!=typeof b||'number'!=typeof b.length))throw new Error('JSON.stringify');return c('',{"":a})},x=function(a,b){var c;return g=a+'',e=0,f=' ',c=h(),n(),f&&k('Syntax error'),'function'==typeof b?function a(c,d){var e,f=c[d];return f&&'object'==typeof f&&Object.keys(f).forEach(function(b){e=a(f,b),void 0===e?delete f[b]:f[b]=e}),b.call(c,d,f)}({"":c},''):c};return{parse:x,stringify:w}}});
