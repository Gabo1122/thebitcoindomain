!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OracleDataProvider=t():e.OracleDataProvider=t()}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s="./dist/index.js")}({"./dist/constants.js":
/*!***************************!*\
  !*** ./dist/constants.js ***!
  \***************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.SCAM=-2]="SCAM",e[e.SUSPICIOUS=-1]="SUSPICIOUS",e[e.NOT_VERIFY=0]="NOT_VERIFY",e[e.DETAILED=1]="DETAILED",e[e.VERIFIED=2]="VERIFIED"}(t.STATUS_LIST||(t.STATUS_LIST={})),function(e){e[e.BETA=0]="BETA"}(t.DATA_PROVIDER_VERSIONS||(t.DATA_PROVIDER_VERSIONS={})),function(e){e.ERROR="error",e.OK="ok",e.EMPTY="empty"}(t.RESPONSE_STATUSES||(t.RESPONSE_STATUSES={})),function(e){e.INTEGER="integer",e.STRING="string",e.BINARY="binary",e.BOOLEAN="boolean"}(t.DATA_ENTRY_TYPES||(t.DATA_ENTRY_TYPES={})),function(e){e.VERSION="data_provider_version",e.NAME="data_provider_name",e.LINK="data_provider_link",e.EMAIL="data_provider_email",e.LANG_LIST="data_provider_lang_list",e.LOGO="data_provider_logo"}(t.DATA_PROVIDER_KEYS||(t.DATA_PROVIDER_KEYS={})),t.DATA_PROVIDER_DESCRIPTION_PATTERN="data_provider_description_<LANG>",function(e){e.VERSION="version_<ASSET_ID>",e.STATUS="status_<ASSET_ID>",e.LOGO="logo_<ASSET_ID>",e.DESCRIPTION="description_<LANG>_<ASSET_ID>",e.LINK="link_<ASSET_ID>",e.TICKER="ticker_<ASSET_ID>",e.EMAIL="email_<ASSET_ID>"}(t.ORACLE_ASSET_FIELD_PATTERN||(t.ORACLE_ASSET_FIELD_PATTERN={})),t.PATTERNS={ASSET_ID:"<ASSET_ID>",LANG:"<LANG>"}},"./dist/index.js":
/*!***********************!*\
  !*** ./dist/index.js ***!
  \***********************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ./parse */"./dist/parse/index.js"),i=r(/*! ./utils */"./dist/utils/index.js"),T=r(/*! ./schemas */"./dist/schemas/index.js");function s(e){return T.DATA_TO_FIELDS.PROVIDER(e)}function o(e){return T.DATA_TO_FIELDS.ASSET(e)}function E(e){return i.isProvider(e)?s(e):o(e)}function S(e){return Array.isArray(e)?e:E(e)}t.getProviderData=function(e){return n.parseOracleData(i.toHash("key")(e))},t.getProviderAssets=function(e){return n.parseAssetData(i.toHash("key")(e))},t.getFieldsFromData=s,t.getFieldsFromAsset=o,t.getFields=E,t.getDifferenceByData=function(e,t){return i.getFieldsDiff(S(e),S(t))},t.getDifferenceByFields=function(e,t){return i.getFieldsDiff(e,t)},function(e){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}(r(/*! ./constants */"./dist/constants.js"))},"./dist/parse/index.js":
/*!*****************************!*\
  !*** ./dist/parse/index.js ***!
  \*****************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../response */"./dist/response/index.js"),i=r(/*! ../constants */"./dist/constants.js"),T=r(/*! ../schemas */"./dist/schemas/index.js");function s(e,t){return e.replace(i.PATTERNS.ASSET_ID,"<"+t+">")}t.parseOracleData=function(e){try{var t=n.getFieldValue(e,i.DATA_PROVIDER_KEYS.VERSION,i.DATA_ENTRY_TYPES.INTEGER);return T.DATA_PROVIDER_VERSION_MAP[t](e)}catch(e){return{status:i.RESPONSE_STATUSES.ERROR,content:{},errors:[{path:"version",error:e}]}}},t.parseAssetData=function(e){return Object.keys(e).map(n.getAssetIdFromKey).filter(n.isString).map(function(t){try{var r=n.getFieldValue(e,s("version_<ASSET_ID>",t),i.DATA_ENTRY_TYPES.INTEGER),o=n.getFieldValue(e,s("status_<ASSET_ID>",t),i.DATA_ENTRY_TYPES.INTEGER);return T.ASSETS_VERSION_MAP[r](t,o)(e)}catch(e){return{status:i.RESPONSE_STATUSES.ERROR,content:{id:t},errors:[{path:"version",error:e}]}}})}},"./dist/response/index.js":
/*!********************************!*\
  !*** ./dist/response/index.js ***!
  \********************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../constants */"./dist/constants.js");function i(e,t,r){var n=e[t];if(!n)throw new Error("Has no field with name "+t);if(n.type!==r)throw new Error("Wrong field type! "+n.type+" is not equal to "+r);return n.value}t.schema=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=[];return function(t){var i=Object.create(null),T=e.reduce(function(e,n){return n(r)(e,t)},i);return r.length?{content:T,errors:r,status:n.RESPONSE_STATUSES.ERROR}:{content:T,status:n.RESPONSE_STATUSES.OK}}},t.processField=function(e,t,r,n){return function(T){return function(s,o){try{return s[t]=i(o,e,r),s}catch(e){(n||null==n)&&T.push({path:t,error:e})}return s}}},t.addAssetId=function(e){return function(t){return function(t){return t.id=e,t}}},t.processDescription=function(e,t){return function(r){return function(T,s){try{var o=i(s,n.DATA_PROVIDER_KEYS.LANG_LIST,n.DATA_ENTRY_TYPES.STRING),E=Object.create(null);o.split(",").forEach(function(T){var o=function(e,t){return t?"description_<LANG>_<ASSET_ID>".replace(n.PATTERNS.LANG,"<"+e+">").replace(n.PATTERNS.ASSET_ID,"<"+t+">"):n.DATA_PROVIDER_DESCRIPTION_PATTERN.replace(n.PATTERNS.LANG,"<"+e+">")}(T,e);try{E[T]=i(s,o,n.DATA_ENTRY_TYPES.STRING)}catch(e){(t||null==t)&&r.push({path:"description."+T,error:e})}}),Object.keys(E).length&&(T.description=E)}catch(e){(t||null==t)&&r.push({path:"description",error:e})}return T}}},t.getFieldValue=i,t.getAssetIdFromKey=function(e){var t="status_<ASSET_ID>".replace(n.PATTERNS.ASSET_ID,"");if(0!==e.indexOf(t))return null;var r=(e.match(/<(.+)?>/)||[])[1];return r&&"status_<ASSET_ID>".replace(n.PATTERNS.ASSET_ID,"<"+r+">")===e?r:null},t.isString=function(e){return"string"==typeof e}},"./dist/schemas/index.js":
/*!*******************************!*\
  !*** ./dist/schemas/index.js ***!
  \*******************************/
/*! no static exports found */function(e,t,r){"use strict";var n,i;Object.defineProperty(t,"__esModule",{value:!0});var T=r(/*! ../constants */"./dist/constants.js"),s=r(/*! ../response */"./dist/response/index.js"),o=r(/*! ../utils */"./dist/utils/index.js");t.DATA_PROVIDER_VERSION_MAP=((n={})[T.DATA_PROVIDER_VERSIONS.BETA]=s.schema(s.processField(T.DATA_PROVIDER_KEYS.VERSION,"version",T.DATA_ENTRY_TYPES.INTEGER),s.processField(T.DATA_PROVIDER_KEYS.NAME,"name",T.DATA_ENTRY_TYPES.STRING),s.processField(T.DATA_PROVIDER_KEYS.LINK,"link",T.DATA_ENTRY_TYPES.STRING),s.processField(T.DATA_PROVIDER_KEYS.EMAIL,"email",T.DATA_ENTRY_TYPES.STRING),s.processDescription()),n),t.ASSETS_VERSION_MAP=((i={})[T.DATA_PROVIDER_VERSIONS.BETA]=function(e,t){var r=o.replaceKey(e);switch(t){case T.STATUS_LIST.SCAM:case T.STATUS_LIST.SUSPICIOUS:case T.STATUS_LIST.NOT_VERIFY:return s.schema(s.processField(r("version_<ASSET_ID>"),"version",T.DATA_ENTRY_TYPES.INTEGER),s.addAssetId(e),s.processField(r("status_<ASSET_ID>"),"status",T.DATA_ENTRY_TYPES.INTEGER),s.processField(r("link_<ASSET_ID>"),"link",T.DATA_ENTRY_TYPES.STRING,!1),s.processField(r("ticker_<ASSET_ID>"),"ticker",T.DATA_ENTRY_TYPES.STRING,!1),s.processField(r("email_<ASSET_ID>"),"email",T.DATA_ENTRY_TYPES.STRING,!1),s.processDescription(e,!1));case T.STATUS_LIST.DETAILED:case T.STATUS_LIST.VERIFIED:return s.schema(s.processField(r("version_<ASSET_ID>"),"version",T.DATA_ENTRY_TYPES.INTEGER),s.addAssetId(e),s.processField(r("status_<ASSET_ID>"),"status",T.DATA_ENTRY_TYPES.INTEGER),s.processField(r("logo_<ASSET_ID>"),"logo",T.DATA_ENTRY_TYPES.STRING),s.processField(r("link_<ASSET_ID>"),"link",T.DATA_ENTRY_TYPES.STRING),s.processField(r("ticker_<ASSET_ID>"),"ticker",T.DATA_ENTRY_TYPES.STRING),s.processField(r("email_<ASSET_ID>"),"email",T.DATA_ENTRY_TYPES.STRING),s.processDescription(e))}},i),t.DATA_TO_FIELDS={PROVIDER:o.toFields(o.addVersion(T.DATA_PROVIDER_VERSIONS.BETA),o.toField("name",T.DATA_PROVIDER_KEYS.NAME,T.DATA_ENTRY_TYPES.STRING),o.toField("link",T.DATA_PROVIDER_KEYS.LINK,T.DATA_ENTRY_TYPES.STRING),o.toField("email",T.DATA_PROVIDER_KEYS.EMAIL,T.DATA_ENTRY_TYPES.STRING),o.descriptionToField()),ASSET:o.toFields(o.addAssetVersion(T.DATA_PROVIDER_VERSIONS.BETA),o.toAssetField("status","status_<ASSET_ID>",T.DATA_ENTRY_TYPES.INTEGER),o.toAssetField("logo","logo_<ASSET_ID>",T.DATA_ENTRY_TYPES.STRING),o.toAssetField("link","link_<ASSET_ID>",T.DATA_ENTRY_TYPES.STRING),o.toAssetField("ticker","ticker_<ASSET_ID>",T.DATA_ENTRY_TYPES.STRING),o.toAssetField("email","email_<ASSET_ID>",T.DATA_ENTRY_TYPES.STRING),o.toAssetDescription())}},"./dist/utils/index.js":
/*!*****************************!*\
  !*** ./dist/utils/index.js ***!
  \*****************************/
/*! no static exports found */function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(/*! ../constants */"./dist/constants.js");function i(e){return function(t){return t.reduce(function(t,r){return t[r[e]]=r,t},Object.create(null))}}function T(e,t){var r=typeof e;switch(t){case n.DATA_ENTRY_TYPES.INTEGER:if("number"!=typeof e)throw new Error("Wrong value type! "+r+" is not assignable to type number!");break;case n.DATA_ENTRY_TYPES.STRING:case n.DATA_ENTRY_TYPES.BINARY:if("string"!=typeof e)throw new Error("Wrong value type! "+r+" is not assignable to type string!");break;case n.DATA_ENTRY_TYPES.BOOLEAN:if("boolean"!=typeof e)throw new Error("Wrong value type! "+r+" is not assignable to type boolean!")}}function s(e,t){return function(r){return t?r.replace(n.PATTERNS.ASSET_ID,"<"+e+">").replace(n.PATTERNS.LANG,"<"+t+">"):r.replace(n.PATTERNS.ASSET_ID,"<"+e+">")}}t.getFieldsDiff=function(e,t){var r=i("key")(e);return t.filter(function(e){return!r[e.key]||r[e.key].type!==e.type||r[e.key].value!==e.value})},t.isProvider=function(e){return!["id","status"].every(function(t){return t in e})},t.toHash=i,t.toFields=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.reduce(function(e,r){var n=r(t);return Array.isArray(n)?e.push.apply(e,n):e.push(n),e},[])}},t.toField=function(e,t,r){return function(n){var i=n[e];if(null==i)throw new Error("Empty field "+e+"!");return T(i,r),{value:i,type:r,key:t}}},t.descriptionToField=function(){return function(e){var t=Object.keys(e.description||{}).join(","),r=Object.keys(e.description||{}).map(function(t){return{key:n.DATA_PROVIDER_DESCRIPTION_PATTERN.replace(n.PATTERNS.LANG,"<"+t+">"),type:n.DATA_ENTRY_TYPES.STRING,value:e.description[t]}});return r.push({key:n.DATA_PROVIDER_KEYS.LANG_LIST,type:n.DATA_ENTRY_TYPES.STRING,value:t}),r}},t.addVersion=function(e){return function(){return{key:n.DATA_PROVIDER_KEYS.VERSION,type:n.DATA_ENTRY_TYPES.INTEGER,value:e}}},t.addAssetVersion=function(e){return function(t){return{key:s(t.id)("version_<ASSET_ID>"),type:n.DATA_ENTRY_TYPES.INTEGER,value:e}}},t.toAssetField=function(e,t,r){return function(n){var i=n[e];return null==i?[]:(T(i,r),{key:s(n.id)(t),type:r,value:i})}},t.toAssetDescription=function(){return function(e){return Object.keys(e.description||{}).map(function(t){return{key:s(e.id,t)("description_<LANG>_<ASSET_ID>"),type:n.DATA_ENTRY_TYPES.STRING,value:e.description[t]}})}},t.replaceKey=s}})});