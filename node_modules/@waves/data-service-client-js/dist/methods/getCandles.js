"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var createMethod_1 = require("./createMethod");
var createRequest_1 = require("../createRequest");
var possibleParams = [
    'timeStart',
    'timeEnd',
    'interval',
    'matcher',
];
var isCandlesParams = function (params) {
    return typeof params === 'object' &&
        Object.keys(params).every(function (k) {
            return possibleParams.includes(k);
        });
};
var isFilters = function (filters) {
    return Array.isArray(filters) &&
        filters.length === 3 &&
        typeof filters[0] === 'string' &&
        typeof filters[1] === 'string' &&
        isCandlesParams(filters[2]);
};
var validateFilters = function (filters) {
    return isFilters(filters)
        ? Promise.resolve(filters)
        : Promise.reject('Wrong filters object');
};
var createRequestForCandles = function (rootUrl) { return function (_a) {
    var amountAssetId = _a[0], priceAssetId = _a[1], params = _a[2];
    return createRequest_1.createRequest(rootUrl + "/candles/" + amountAssetId + "/" + priceAssetId, params);
}; };
var createGetCandles = function (libOptions) {
    return createMethod_1.createMethod({
        validate: validateFilters,
        generateRequest: createRequestForCandles,
        libOptions: libOptions,
    });
};
exports.default = createGetCandles;
