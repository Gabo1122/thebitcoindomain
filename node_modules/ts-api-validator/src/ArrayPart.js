"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const BasePart_1 = require("./BasePart");
const ts_utils_1 = require("ts-utils");
class ArrayPart extends BasePart_1.BasePart {
    constructor(config, path) {
        super(config, path);
        const Component = this.options.content.type;
        this._child = new Component(this.options.content);
    }
    process(data, rootList) {
        return super.process(data, rootList).then((value) => {
            if (value && ts_utils_1.isArray(value)) {
                return Promise.all(value.map((item) => this._child.process(item, rootList.concat(data))));
            }
            else {
                return value;
            }
        });
    }
    getValue(data) {
        if (ts_utils_1.isArray(data)) {
            return data;
        }
        else {
            return null;
        }
    }
}
exports.ArrayPart = ArrayPart;
